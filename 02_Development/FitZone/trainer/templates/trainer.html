{% extends 'base.html' %}
{% block content %}

<div class="container py-5 trainer-page" style="min-height:100vh;">

  <!-- Section Title -->
  <div class="trainer-section-title">
    <h2 class="mt-4">Meet Your <span>Trainers</span></h2>
    <p class="text-secondary">
      Our certified professionals are ready to guide you on your fitness journey.
    </p>
  </div>

  <!-- Trainer Cards -->
  <div class="row g-4 mt-3">
    {% if trainers %}
      {% for trainer in trainers %}
      <div class="col-12 col-md-6 col-lg-4">
        <article class="trainer-card-v2">

          <!-- Image -->
          <div class="trainer-media">
            {% if trainer.get_profile_picture %}
              <img
                src="{{ trainer.get_profile_picture.file.url }}"
                alt="{{ trainer.user.get_full_name|default:trainer.user.username }}"
                class="trainer-img-v2"
                onerror="this.src='https://ui-avatars.com/api/?name={{ trainer.user.get_full_name|default:trainer.user.username }}&size=600&background=ff7a18&color=fff'"
              >
            {% else %}
              <img
                src="https://ui-avatars.com/api/?name={{ trainer.user.get_full_name|default:trainer.user.username }}&size=600&background=ff7a18&color=fff"
                alt="{{ trainer.user.get_full_name|default:trainer.user.username }}"
                class="trainer-img-v2"
              >
            {% endif %}

            <!-- Top badges -->
            <div class="trainer-badges">
              <span class="badge-pill badge-verified">
                <span class="dot"></span> Verified
              </span>
              <span class="badge-pill badge-role">
                {{ trainer.specialization|default:"Trainer" }}
              </span>
            </div>

            <!-- Bottom overlay info -->
            <div class="trainer-overlay">
              <h3 class="trainer-name-v2">
                {{ trainer.user.get_full_name|default:trainer.user.username }}
              </h3>

              <div class="trainer-meta">
                <span class="meta-item">⭐ 5.0</span>
                <span class="meta-sep">•</span>
                <span class="meta-item">{{ trainer.experience|default:"0" }} yrs exp</span>
              </div>
            </div>
          </div>

          <!-- Content -->
          <div class="trainer-content-v2">
            <p class="trainer-bio-v2">
              {{ trainer.bio|default:"Certified fitness professional dedicated to helping you achieve your health and wellness goals through personalized training programs." }}
            </p>

            <div class="trainer-actions">
              <a class="btn-outline-v2" href="{% url 'trainer_profile_detail' trainer.id %}">
                View Profile
              </a>

              <button class="btn-book-v2" type="button" data-bs-toggle="modal" data-bs-target="#bookingModal{{ trainer.id }}">
                Book Now
              </button>
            </div>
          </div>

        </article>

        <!-- Booking Modal for this trainer -->
        <div class="modal fade" id="bookingModal{{ trainer.id }}" tabindex="-1" aria-labelledby="bookingModalLabel{{ trainer.id }}" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background: linear-gradient(135deg, rgba(20,20,22,0.98), rgba(30,30,35,0.95)); border: 2px solid rgba(255,122,24,0.3); color: #f4f4f4;">
              <div class="modal-header" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                <h5 class="modal-title" id="bookingModalLabel{{ trainer.id }}" style="color: #ff7a18;">
                  <i class="fas fa-calendar-check"></i> Book Training with {{ trainer.user.get_full_name|default:trainer.user.username }}
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
              </div>
              <div class="modal-body">
                <div style="margin-bottom: 20px; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 12px;">
                  <h6 style="color: #ff7a18; margin-bottom: 10px;"><i class="fas fa-rupee-sign"></i> Monthly Fee</h6>
                  <p style="font-size: 28px; font-weight: 700; color: #f4f4f4; margin: 0;">
                    {% if trainer.monthly_price %}
                      ₹{{ trainer.monthly_price }}
                      <span style="font-size: 14px; color: rgba(255,255,255,0.6);">/ month</span>
                    {% else %}
                      <span style="font-size: 18px;">Contact for pricing</span>
                    {% endif %}
                  </p>
                </div>

                {% if trainer.available_time %}
                <div style="padding: 20px; background: rgba(34,197,94,0.08); border: 1.5px solid rgba(34,197,94,0.3); border-radius: 12px;">
                  <h6 style="color: #22c55e; margin-bottom: 10px;"><i class="fas fa-clock"></i> Available Times</h6>
                  <p style="color: #22c55e; font-size: 15px; font-weight: 600; margin: 0;">
                    {{ trainer.available_time }}
                  </p>
                </div>
                {% endif %}
              </div>
              <div class="modal-footer" style="border-top: 1px solid rgba(255,255,255,0.1);">
                <button type="button" class="btn" style="background: rgba(255,255,255,0.1); color: #f4f4f4;" data-bs-dismiss="modal">Close</button>
                <a href="" class="btn" style="background: linear-gradient(135deg, #ff7a18, #ff9a3c); color: #141416; font-weight: 700;">
                  <i class="fas fa-user"></i> Book Now
                </a>
              </div>
            </div>
          </div>
        </div>
        
      </div>

      {% endfor %}
    {% else %}
      <div class="col-12">
        <div class="empty-state-v2 text-center py-5">
          <i class="fa-solid fa-user-slash empty-icon"></i>
          <h3>No Verified Trainers Available</h3>
          <p>Check back later for available trainers.</p>
        </div>
      </div>
    {% endif %}
  </div>

</div>

{% endblock content %}
