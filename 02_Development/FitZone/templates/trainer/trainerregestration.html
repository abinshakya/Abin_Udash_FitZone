{% extends 'base.html' %}
{% block content %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  :root{
    --bg0:#0b0b0c;
    --bg1:#141416;

    --cardTop: rgba(30,30,30,0.92);
    --cardBot: rgba(14,14,14,0.92);

    --text:#f4f4f4;
    --muted: rgba(255,255,255,0.68);
    --border: rgba(255,255,255,0.10);

    --orange:#ff7a18;
    --orange2:#ff9a3c;

    --shadow: 0 22px 70px rgba(0,0,0,0.65);
  }

  *{ box-sizing: border-box; }

  .page-wrapper{
    min-height: calc(100vh - 80px);
    display: grid;
    place-items: center;
    padding: 38px 16px 70px;
    background:
      radial-gradient(1000px 520px at 18% 0%, rgba(255,122,24,0.22), transparent 60%),
      radial-gradient(900px 450px at 85% 10%, rgba(255,154,60,0.12), transparent 60%),
      linear-gradient(135deg, var(--bg0) 0%, var(--bg1) 100%);
    font-family: "Poppins", system-ui, sans-serif;
    color: var(--text);
  }

  .form-container{ width: min(980px, 100%); margin: 0 auto; }

  .form-card{
    position: relative;
    border-radius: 22px;
    border: 1px solid rgba(255,255,255,0.10);
    background: linear-gradient(180deg, var(--cardTop), var(--cardBot));
    box-shadow: var(--shadow);
    overflow: hidden;
  }

  .form-card::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius: 22px;
    padding: 1px;
    background: linear-gradient(135deg,
      rgba(255,122,24,0.22),
      rgba(255,255,255,0.08),
      rgba(255,154,60,0.18)
    );
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events:none;
    opacity: 0.85;
  }

  .form-header{
    padding: 22px 24px 18px;
    border-bottom: 1px solid rgba(255,255,255,0.07);
    background: rgba(255,255,255,0.02);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 14px;
  }

  .form-title{
    margin: 0;
    font-size: 1.55rem;
    font-weight: 950;
    letter-spacing: 0.2px;
    display: flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, #ffffff, var(--orange2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .form-subtitle{
    margin: 0;
    color: rgba(255,255,255,0.65);
    font-weight: 600;
    font-size: 0.95rem;
    line-height: 1.35;
  }

  .secure-pill{
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-radius: 999px;
    background: rgba(255,122,24,0.14);
    border: 1px solid rgba(255,122,24,0.28);
    color: #fff;
    font-weight: 900;
    font-size: 0.9rem;
    white-space: nowrap;
  }

  .form-body{ padding: 22px 24px 26px; }

  form{
    display: grid;
    gap: 16px;
    position: relative;
    z-index: 1;
  }

  .grid-2{
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  @media (max-width: 860px){
    .grid-2{ grid-template-columns: 1fr; }
    .form-header{ flex-direction: column; align-items: flex-start; }
  }

  .form-group{ display: grid; gap: 8px; }

  .form-group label{
    font-size: 0.92rem;
    color: rgba(255,255,255,0.78);
    font-weight: 800;
  }

  .form-group input[type="text"],
  .form-group input[type="number"],
  .form-group textarea{
    width: 100%;
    padding: 12px 14px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.10);
    background: rgba(255,255,255,0.04);
    color: #fff;
    outline: none;
    transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
    font-size: 0.98rem;
  }

  .form-group textarea{ resize: vertical; min-height: 110px; }

  .form-group input::placeholder,
  .form-group textarea::placeholder{ color: rgba(255,255,255,0.45); }

  .form-group input:focus,
  .form-group textarea:focus{
    border-color: rgba(255,122,24,0.75);
    box-shadow: 0 0 0 0.22rem rgba(255,122,24,0.18);
    background: rgba(255,255,255,0.06);
  }

  .help{
    margin-top: -2px;
    color: rgba(255,255,255,0.55);
    font-size: 0.88rem;
    line-height: 1.35;
  }

  /* ---------- File Upload Blocks ---------- */
  .file-block{
    padding: 16px 16px;
    border-radius: 16px;
    background: rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.08);
  }

  .file-head{
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 10px;
  }

  .file-tag{
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(255,122,24,0.14);
    border: 1px solid rgba(255,122,24,0.22);
    color: #fff;
    font-weight: 900;
    font-size: 0.78rem;
    white-space: nowrap;
  }

  /* Hide default file input */
  .file-block input[type="file"]{ display: none; }

  .file-ui{
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 6px;
  }

  .file-btn{
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.92);
    font-weight: 900;
    cursor: pointer;
    transition: transform .18s ease, border-color .18s ease, background .18s ease, box-shadow .18s ease;
    user-select: none;
    white-space: nowrap;
  }

  .file-btn:hover{
    transform: translateY(-1px);
    background: rgba(255,255,255,0.09);
    border-color: rgba(255,122,24,0.28);
    box-shadow: 0 14px 30px rgba(0,0,0,0.25);
  }

  .file-btn i{ color: var(--orange); }

  .file-name{
    color: rgba(255,255,255,0.70);
    font-weight: 700;
    font-size: 0.92rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
    min-width: 0;
  }

  /* ✅ multiple preview grid */
  .preview-grid{
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(46px, 46px));
    gap: 8px;
    margin-top: 10px;
  }

  .thumb{
    width: 46px;
    height: 46px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.04);
    overflow: hidden;
    box-shadow: 0 12px 26px rgba(0,0,0,0.35);
  }

  .thumb img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .form-actions{ display: grid; gap: 10px; margin-top: 6px; }

  .submit-btn{
    width: 100%;
    padding: 14px 16px;
    border-radius: 18px;
    border: 1px solid rgba(255,122,24,0.35);
    background: linear-gradient(135deg, var(--orange), var(--orange2));
    color: #fff;
    font-size: 1.02rem;
    font-weight: 950;
    cursor: pointer;
    transition: transform .22s ease, box-shadow .22s ease, filter .22s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  .submit-btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 20px 45px rgba(255,122,24,0.30);
    filter: brightness(1.06);
  }

  .fineprint{
    margin: 0;
    color: rgba(255,255,255,0.60);
    font-size: 0.9rem;
    line-height: 1.4;
    text-align: center;
  }
</style>

<div class="page-wrapper">
  <div class="form-container">
    <div class="form-card">

      <div class="form-header">
        <div>
          <h2 class="form-title">
            <i class="fa-solid fa-user-check" style="color:var(--orange)"></i>
            Trainer Registration
          </h2>
          <p class="form-subtitle">Fill in your details and upload documents to become a FitZone trainer.</p>
        </div>

        <span class="secure-pill">
          <i class="fa-solid fa-shield-halved"></i> Verified Trainers
        </span>
      </div>

      <div class="form-body">
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}

          <div class="grid-2">
            <div class="form-group">
              <label for="experience">Experience (years)</label>
              <input type="number" id="experience" name="experience" min="0" placeholder="e.g. 3" required>
              <div class="help">Enter total years of professional training experience.</div>
            </div>

            <div class="form-group">
              <label for="specialization">Area of Expertise / Specialization</label>
              <input type="text" id="specialization" name="specialization"
                     placeholder="e.g. Strength Training, Yoga, Cardio" required>
              <div class="help">Add your main training categories (comma separated).</div>
            </div>
          </div>

          <div class="grid-2">
            <!-- ✅ Certification (multiple) -->
            <div class="file-block" id="block-certification">
              <div class="file-head">
                <label for="certification" style="margin:0;">Certification</label>
                <span class="file-tag"><i class="fa-solid fa-file"></i> PDF / Images</span>
              </div>

              <input type="file" id="certification" name="certification" accept="image/*,application/pdf" multiple>

              <div class="file-ui">
                <label class="file-btn" for="certification">
                  <i class="fa-solid fa-arrow-up-from-bracket"></i> Choose Files
                </label>
                <div class="file-name" id="name-certification">No files selected</div>
              </div>

              <div class="preview-grid" id="preview-certification"></div>
              <div class="help">Upload certificate images or PDF files (multiple allowed).</div>
            </div>

            <!-- ✅ Profile Picture (multiple images) -->
            <div class="file-block" id="block-profile_pic">
              <div class="file-head">
                <label for="profile_pic" style="margin:0;">Profile Pictures</label>
                <span class="file-tag"><i class="fa-solid fa-image"></i> Images</span>
              </div>

              <input type="file" id="profile_pic" name="profile_pic" accept="image/*" multiple>

              <div class="file-ui">
                <label class="file-btn" for="profile_pic">
                  <i class="fa-solid fa-camera"></i> Choose Images
                </label>
                <div class="file-name" id="name-profile_pic">No files selected</div>
              </div>

              <div class="preview-grid" id="preview-profile_pic"></div>
              <div class="help">Upload multiple images (we’ll use the best as your main photo).</div>
            </div>
          </div>

          <div class="grid-2">
            <!-- ✅ Identity Proof (multiple) -->
            <div class="file-block" id="block-identity_proof">
              <div class="file-head">
                <label for="identity_proof" style="margin:0;">Identity Proof</label>
                <span class="file-tag"><i class="fa-solid fa-id-card"></i> PDF / Images</span>
              </div>

              <input type="file" id="identity_proof" name="identity_proof" accept="image/*,application/pdf" multiple>

              <div class="file-ui">
                <label class="file-btn" for="identity_proof">
                  <i class="fa-solid fa-id-card"></i> Choose Files
                </label>
                <div class="file-name" id="name-identity_proof">No files selected</div>
              </div>

              <div class="preview-grid" id="preview-identity_proof"></div>
              <div class="help">Upload government-issued ID (multiple allowed).</div>
            </div>

            <!-- ✅ Experience Verification (multiple) -->
            <div class="file-block" id="block-experience_verification">
              <div class="file-head">
                <label for="experience_verification" style="margin:0;">Experience Verification</label>
                <span class="file-tag"><i class="fa-solid fa-briefcase"></i> PDF / Images</span>
              </div>

              <input type="file" id="experience_verification" name="experience_verification" accept="image/*,application/pdf" multiple>

              <div class="file-ui">
                <label class="file-btn" for="experience_verification">
                  <i class="fa-solid fa-file-signature"></i> Choose Files
                </label>
                <div class="file-name" id="name-experience_verification">No files selected</div>
              </div>

              <div class="preview-grid" id="preview-experience_verification"></div>
              <div class="help">Upload experience letter or documents (multiple allowed).</div>
            </div>
          </div>

          <div class="form-group">
            <label for="bio">Short Bio</label>
            <textarea id="bio" name="bio" rows="4" placeholder="Tell clients about your style, certifications, and specialties..."></textarea>
            <div class="help">Keep it short and professional (2–4 lines).</div>
          </div>

          <div class="form-actions">
            <button type="submit" class="submit-btn">
              Submit Registration <span style="font-weight:900;">→</span>
            </button>
            <p class="fineprint">
              By submitting, you confirm all information is accurate. FitZone may verify documents before approval.
            </p>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>

<script>
  function attachMultiFileUI(inputId) {
    const input = document.getElementById(inputId);
    const nameEl = document.getElementById(`name-${inputId}`);
    const previewGrid = document.getElementById(`preview-${inputId}`);
    if (!input || !nameEl || !previewGrid) return;

    input.addEventListener("change", () => {
      const files = Array.from(input.files || []);
      previewGrid.innerHTML = "";

      if (!files.length) {
        nameEl.textContent = "No files selected";
        return;
      }

      // show "x files selected"
      nameEl.textContent = files.length === 1 ? files[0].name : `${files.length} files selected`;

      // show previews only for image files
      files.forEach((file) => {
        if (file.type && file.type.startsWith("image/")) {
          const url = URL.createObjectURL(file);
          const wrap = document.createElement("div");
          wrap.className = "thumb";

          const img = document.createElement("img");
          img.src = url;
          img.alt = "Preview";

          wrap.appendChild(img);
          previewGrid.appendChild(wrap);

          img.onload = () => URL.revokeObjectURL(url);
        }
      });
    });
  }

  ["certification", "profile_pic", "identity_proof", "experience_verification"].forEach(attachMultiFileUI);
</script>

{% endblock content %}
